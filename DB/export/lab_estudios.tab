create table DEVELOPER.LAB_ESTUDIOS
(
  id               NUMBER generated by default on null as identity,
  empresa_id       NUMBER not null,
  codigo           NUMBER,
  tipo_estudio_id  NUMBER,
  descripcion      VARCHAR2(255 CHAR),
  nivel            NUMBER default '1',
  estudio_padre_id NUMBER,
  ind_titulo       VARCHAR2(2 CHAR),
  impuesto_id      NUMBER,
  creado           DATE not null,
  creado_por       VARCHAR2(255 CHAR) not null,
  modificado       DATE not null,
  modificado_por   VARCHAR2(255 CHAR) not null
)
;
create index DEVELOPER.LAB_ESTUDIOS_I1 on DEVELOPER.LAB_ESTUDIOS (ESTUDIO_PADRE_ID);
create index DEVELOPER.LAB_ESTUDIOS_I112 on DEVELOPER.LAB_ESTUDIOS (IMPUESTO_ID);
create index DEVELOPER.LAB_ESTUDIOS_I123 on DEVELOPER.LAB_ESTUDIOS (TIPO_ESTUDIO_ID);
alter table DEVELOPER.LAB_ESTUDIOS
  add constraint LAB_ESTUDIOS_ID_PK primary key (ID);
alter table DEVELOPER.LAB_ESTUDIOS
  add constraint LAB_ESTUDIOS_ESTUDIO_PADRE_FK foreign key (ESTUDIO_PADRE_ID)
  references DEVELOPER.LAB_ESTUDIOS (ID) on delete cascade;
alter table DEVELOPER.LAB_ESTUDIOS
  add constraint LAB_ESTUDIOS_IMPUESTO_ID_FK foreign key (IMPUESTO_ID)
  references DEVELOPER.LAB_IMPUESTOS (ID) on delete cascade;
alter table DEVELOPER.LAB_ESTUDIOS
  add constraint LAB_ESTUDIOS_TIPO_ESTUDIO_I_FK foreign key (TIPO_ESTUDIO_ID)
  references DEVELOPER.LAB_TIPOS_ESTUDIOS (ID) on delete cascade;
alter table DEVELOPER.LAB_ESTUDIOS
  add constraint LAB_ESTUDIOS_IND_TITULO_CK
  check (ind_titulo in ('SI','NO'));

